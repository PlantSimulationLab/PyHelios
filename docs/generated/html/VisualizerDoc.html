<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PyHelios: Visualizer Plugin</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="pyhelios-custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="PyHelios_logo_whiteborder.png"/></td>
  <td id="projectalign">
   <div id="projectname">PyHelios
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('VisualizerDoc.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Visualizer Plugin</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_docs_2plugin__visualizer"></a></p>
<p>The Visualizer plugin provides OpenGL-based 3D visualization and rendering capabilities. This documentation is based on the actual implementation.</p>
<h1><a class="anchor" id="autotoc_md251"></a>
Overview</h1>
<p>The Visualizer class provides interactive 3D visualization of Helios scenes with real-time rendering, camera controls, and image export capabilities.</p>
<h1><a class="anchor" id="autotoc_md252"></a>
Requirements</h1>
<p>The visualizer plugin requires:</p><ul>
<li>OpenGL 3.3 or higher</li>
<li>GLFW library for window management</li>
<li>FreeType library for text rendering <br  />
</li>
<li>Display/graphics drivers (X11 on Linux, native on Windows/macOS)</li>
</ul>
<h1><a class="anchor" id="autotoc_md253"></a>
Basic Usage</h1>
<div class="fragment"><div class="line"><span class="keyword">from</span> pyhelios <span class="keyword">import</span> Context, Visualizer, VisualizerError</div>
<div class="line"><span class="keyword">from</span> pyhelios <span class="keyword">import</span> DataTypes</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Create context with geometry</span></div>
<div class="line">context = Context()</div>
<div class="line">patch_uuid = context.addPatch(</div>
<div class="line">    center=DataTypes.vec3(0, 0, 0),</div>
<div class="line">    size=DataTypes.vec2(2, 2),</div>
<div class="line">    color=DataTypes.RGBcolor(0.3, 0.7, 0.2)</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Use Visualizer with context manager (recommended)</span></div>
<div class="line"><span class="keyword">with</span> Visualizer(width=1024, height=768, antialiasing_samples=4) <span class="keyword">as</span> visualizer:</div>
<div class="line">    <span class="comment"># Build scene geometry</span></div>
<div class="line">    visualizer.buildContextGeometry(context)</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Set up camera</span></div>
<div class="line">    visualizer.setCameraPosition(</div>
<div class="line">        position=[5, 5, 5],</div>
<div class="line">        lookAt=[0, 0, 0]</div>
<div class="line">    )</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Configure scene</span></div>
<div class="line">    visualizer.setBackgroundColor([0.5, 0.7, 1.0])  <span class="comment"># Sky blue</span></div>
<div class="line">    visualizer.setLightingModel(<span class="stringliteral">&quot;phong&quot;</span>)</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Show interactive visualization</span></div>
<div class="line">    visualizer.plotInteractive()</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md254"></a>
Visualizer Creation</h1>
<h2><a class="anchor" id="autotoc_md255"></a>
Basic Initialization</h2>
<div class="fragment"><div class="line"><span class="comment"># Basic visualizer (verified constructor parameters)</span></div>
<div class="line">visualizer = Visualizer(</div>
<div class="line">    width=800, </div>
<div class="line">    height=600, </div>
<div class="line">    antialiasing_samples=1, </div>
<div class="line">    headless=<span class="keyword">False</span></div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># High-quality visualizer with antialiasing</span></div>
<div class="line">visualizer = Visualizer(</div>
<div class="line">    width=1920, </div>
<div class="line">    height=1080, </div>
<div class="line">    antialiasing_samples=8, </div>
<div class="line">    headless=<span class="keyword">False</span></div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Headless mode for batch processing</span></div>
<div class="line">visualizer = Visualizer(</div>
<div class="line">    width=1024, </div>
<div class="line">    height=768, </div>
<div class="line">    antialiasing_samples=1, </div>
<div class="line">    headless=<span class="keyword">True</span></div>
<div class="line">)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md256"></a>
Context Manager Usage</h2>
<div class="fragment"><div class="line"><span class="comment"># Recommended: use context manager for automatic cleanup</span></div>
<div class="line"><span class="keyword">with</span> Visualizer(1024, 768, antialiasing_samples=4) <span class="keyword">as</span> visualizer:</div>
<div class="line">    <span class="comment"># Visualization code here</span></div>
<div class="line">    <span class="keywordflow">pass</span>  <span class="comment"># Automatic cleanup when done</span></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md257"></a>
Geometry Loading</h1>
<h2><a class="anchor" id="autotoc_md258"></a>
Building Context Geometry</h2>
<div class="fragment"><div class="line"><span class="comment"># Load all geometry from context (verified method)</span></div>
<div class="line">visualizer.buildContextGeometry(context)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Load specific geometry UUIDs only</span></div>
<div class="line">specific_uuids = [patch_uuid, triangle_uuid]</div>
<div class="line">visualizer.buildContextGeometry(context, uuids=specific_uuids)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md259"></a>
Progressive Loading</h2>
<div class="fragment"><div class="line"><span class="comment"># Load geometry progressively for large scenes</span></div>
<div class="line">all_uuids = context.getAllUUIDs()</div>
<div class="line">batch_size = 1000</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(0, len(all_uuids), batch_size):</div>
<div class="line">    batch_uuids = all_uuids[i:i + batch_size]</div>
<div class="line">    visualizer.buildContextGeometry(context, uuids=batch_uuids)</div>
<div class="line">    print(f<span class="stringliteral">&quot;Loaded batch {i//batch_size + 1}&quot;</span>)</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md260"></a>
Visualization Modes</h1>
<h2><a class="anchor" id="autotoc_md261"></a>
Interactive Visualization</h2>
<div class="fragment"><div class="line"><span class="comment"># Open interactive window (verified method)</span></div>
<div class="line">visualizer.plotInteractive()</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Interactive controls available:</span></div>
<div class="line"><span class="comment"># - Mouse scroll: Zoom in/out</span></div>
<div class="line"><span class="comment"># - Left mouse + drag: Rotate camera</span></div>
<div class="line"><span class="comment"># - Right mouse + drag: Pan camera  </span></div>
<div class="line"><span class="comment"># - Arrow keys: Camera movement</span></div>
<div class="line"><span class="comment"># - +/- keys: Zoom in/out</span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md262"></a>
Non-Interactive Updates</h2>
<div class="fragment"><div class="line"><span class="comment"># Update visualization without interaction (verified method)</span></div>
<div class="line">visualizer.plotUpdate()</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Useful for batch processing or animation sequences</span></div>
<div class="line"><span class="keywordflow">for</span> frame <span class="keywordflow">in</span> range(100):</div>
<div class="line">    <span class="comment"># Update scene data</span></div>
<div class="line">    update_scene_data(frame)</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Rebuild geometry if needed</span></div>
<div class="line">    visualizer.buildContextGeometry(context)</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Update visualization</span></div>
<div class="line">    visualizer.plotUpdate()</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Save frame</span></div>
<div class="line">    visualizer.printWindow(f<span class="stringliteral">&quot;frame_{frame:03d}.jpg&quot;</span>)</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md263"></a>
Camera Control</h1>
<h2><a class="anchor" id="autotoc_md264"></a>
Cartesian Camera Positioning</h2>
<div class="fragment"><div class="line"><span class="comment"># Set camera position using Cartesian coordinates (verified method)</span></div>
<div class="line">visualizer.setCameraPosition(</div>
<div class="line">    position=[10, 10, 10],  <span class="comment"># Camera position [x, y, z]</span></div>
<div class="line">    lookAt=[0, 0, 0]        <span class="comment"># Look-at point [x, y, z]</span></div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Top-down view</span></div>
<div class="line">visualizer.setCameraPosition(</div>
<div class="line">    position=[0, 0, 20],</div>
<div class="line">    lookAt=[0, 0, 0]</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Side view</span></div>
<div class="line">visualizer.setCameraPosition(</div>
<div class="line">    position=[20, 0, 5],</div>
<div class="line">    lookAt=[0, 0, 5]</div>
<div class="line">)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md265"></a>
Spherical Camera Positioning</h2>
<div class="fragment"><div class="line"><span class="comment"># Set camera position using spherical coordinates (verified method)</span></div>
<div class="line">visualizer.setCameraPositionSpherical(</div>
<div class="line">    angle=[15, 0.785, 1.57],  <span class="comment"># [radius, zenith, azimuth] in radians</span></div>
<div class="line">    lookAt=[0, 0, 0]          <span class="comment"># Look-at point [x, y, z]</span></div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Orbit around scene</span></div>
<div class="line"><span class="keyword">import</span> math</div>
<div class="line"><span class="keywordflow">for</span> angle <span class="keywordflow">in</span> range(0, 360, 10):</div>
<div class="line">    azimuth = math.radians(angle)</div>
<div class="line">    visualizer.setCameraPositionSpherical(</div>
<div class="line">        angle=[20, math.pi/4, azimuth],  <span class="comment"># Fixed radius and zenith</span></div>
<div class="line">        lookAt=[0, 0, 0]</div>
<div class="line">    )</div>
<div class="line">    visualizer.plotUpdate()</div>
<div class="line">    visualizer.printWindow(f<span class="stringliteral">&quot;orbit_{angle:03d}.jpg&quot;</span>)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md266"></a>
Camera Animation</h2>
<div class="fragment"><div class="line"><span class="comment"># Smooth camera animation</span></div>
<div class="line"><span class="keyword">def </span>animate_camera(visualizer, start_pos, end_pos, frames=30):</div>
<div class="line">    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(frames):</div>
<div class="line">        <span class="comment"># Linear interpolation</span></div>
<div class="line">        t = i / (frames - 1)</div>
<div class="line">        current_pos = [</div>
<div class="line">            start_pos[j] + t * (end_pos[j] - start_pos[j])</div>
<div class="line">            <span class="keywordflow">for</span> j <span class="keywordflow">in</span> range(3)</div>
<div class="line">        ]</div>
<div class="line">        </div>
<div class="line">        visualizer.setCameraPosition(current_pos, [0, 0, 0])</div>
<div class="line">        visualizer.plotUpdate()</div>
<div class="line">        visualizer.printWindow(f<span class="stringliteral">&quot;camera_anim_{i:03d}.jpg&quot;</span>)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Use the animation</span></div>
<div class="line">start = [20, 0, 10]</div>
<div class="line">end = [0, 20, 10]</div>
<div class="line">animate_camera(visualizer, start, end)</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md267"></a>
Scene Configuration</h1>
<h2><a class="anchor" id="autotoc_md268"></a>
Background and Lighting</h2>
<div class="fragment"><div class="line"><span class="comment"># Set background color (verified method)</span></div>
<div class="line">visualizer.setBackgroundColor([0.2, 0.3, 0.5])  <span class="comment"># Dark blue</span></div>
<div class="line">visualizer.setBackgroundColor([1.0, 1.0, 1.0])  <span class="comment"># White</span></div>
<div class="line">visualizer.setBackgroundColor([0.0, 0.0, 0.0])  <span class="comment"># Black</span></div>
<div class="line"> </div>
<div class="line"><span class="comment"># Set light direction (verified method)</span></div>
<div class="line">visualizer.setLightDirection([0.5, 0.5, -1.0])  <span class="comment"># Directional light</span></div>
<div class="line"> </div>
<div class="line"><span class="comment"># Configure lighting model (verified method and constants)</span></div>
<div class="line">visualizer.setLightingModel(0)              <span class="comment"># No lighting</span></div>
<div class="line">visualizer.setLightingModel(1)              <span class="comment"># Phong shading  </span></div>
<div class="line">visualizer.setLightingModel(2)              <span class="comment"># Phong with shadows</span></div>
<div class="line">visualizer.setLightingModel(<span class="stringliteral">&quot;none&quot;</span>)         <span class="comment"># String equivalent</span></div>
<div class="line">visualizer.setLightingModel(<span class="stringliteral">&quot;phong&quot;</span>)        <span class="comment"># String equivalent</span></div>
<div class="line">visualizer.setLightingModel(<span class="stringliteral">&quot;phong_shadowed&quot;</span>)  <span class="comment"># String equivalent</span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md269"></a>
Lighting Scenarios</h2>
<div class="fragment"><div class="line"><span class="comment"># Outdoor daylight</span></div>
<div class="line">visualizer.setBackgroundColor([0.5, 0.7, 1.0])     <span class="comment"># Sky blue</span></div>
<div class="line">visualizer.setLightDirection([0.3, 0.3, -0.9])     <span class="comment"># Sun direction</span></div>
<div class="line">visualizer.setLightingModel(<span class="stringliteral">&quot;phong_shadowed&quot;</span>)       <span class="comment"># Realistic shadows</span></div>
<div class="line"> </div>
<div class="line"><span class="comment"># Indoor studio lighting</span></div>
<div class="line">visualizer.setBackgroundColor([0.1, 0.1, 0.1])     <span class="comment"># Dark background</span></div>
<div class="line">visualizer.setLightDirection([0.0, 0.0, -1.0])     <span class="comment"># Top-down light</span></div>
<div class="line">visualizer.setLightingModel(<span class="stringliteral">&quot;phong&quot;</span>)                <span class="comment"># Clean lighting</span></div>
<div class="line"> </div>
<div class="line"><span class="comment"># Technical/CAD view</span></div>
<div class="line">visualizer.setBackgroundColor([0.9, 0.9, 0.9])     <span class="comment"># Light gray</span></div>
<div class="line">visualizer.setLightDirection([0.577, 0.577, -0.577])  <span class="comment"># Isometric</span></div>
<div class="line">visualizer.setLightingModel(<span class="stringliteral">&quot;phong&quot;</span>)                <span class="comment"># Even lighting</span></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md270"></a>
Image Export</h1>
<h2><a class="anchor" id="autotoc_md271"></a>
Basic Image Saving</h2>
<div class="fragment"><div class="line"><span class="comment"># Save current view to image (verified method)</span></div>
<div class="line">visualizer.printWindow(<span class="stringliteral">&quot;scene_view.jpg&quot;</span>)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># High-resolution image export</span></div>
<div class="line">high_res_visualizer = Visualizer(3840, 2160, headless=<span class="keyword">True</span>)</div>
<div class="line">high_res_visualizer.buildContextGeometry(context)</div>
<div class="line">high_res_visualizer.setCameraPosition([10, 10, 10], [0, 0, 0])</div>
<div class="line">high_res_visualizer.plotUpdate()</div>
<div class="line">high_res_visualizer.printWindow(<span class="stringliteral">&quot;high_res_scene.jpg&quot;</span>)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md272"></a>
Batch Image Generation</h2>
<div class="fragment"><div class="line"><span class="comment"># Generate multiple views</span></div>
<div class="line">views = {</div>
<div class="line">    <span class="stringliteral">&quot;front&quot;</span>: ([0, 15, 5], [0, 0, 5]),</div>
<div class="line">    <span class="stringliteral">&quot;side&quot;</span>: ([15, 0, 5], [0, 0, 5]),</div>
<div class="line">    <span class="stringliteral">&quot;top&quot;</span>: ([0, 0, 20], [0, 0, 0]),</div>
<div class="line">    <span class="stringliteral">&quot;iso&quot;</span>: ([10, 10, 10], [0, 0, 0])</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">for</span> view_name, (position, look_at) <span class="keywordflow">in</span> views.items():</div>
<div class="line">    visualizer.setCameraPosition(position, look_at)</div>
<div class="line">    visualizer.plotUpdate()</div>
<div class="line">    visualizer.printWindow(f<span class="stringliteral">&quot;scene_{view_name}.jpg&quot;</span>)</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md273"></a>
Window Management</h1>
<h2><a class="anchor" id="autotoc_md274"></a>
Window Control</h2>
<div class="fragment"><div class="line"><span class="comment"># Close visualization window (verified method)</span></div>
<div class="line">visualizer.closeWindow()</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Safe to call even if no window is open</span></div>
<div class="line">visualizer.closeWindow()  <span class="comment"># No error</span></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md275"></a>
Complete Workflow Examples</h1>
<h2><a class="anchor" id="autotoc_md276"></a>
Tree Visualization</h2>
<div class="fragment"><div class="line"><span class="keyword">from</span> pyhelios <span class="keyword">import</span> Context, WeberPennTree, WPTType, Visualizer, DataTypes</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Create scene</span></div>
<div class="line">context = Context()</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Generate tree</span></div>
<div class="line">wpt = WeberPennTree(context)</div>
<div class="line">tree_id = wpt.buildTree(WPTType.APPLE)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Add ground plane</span></div>
<div class="line">ground_uuid = context.addPatch(</div>
<div class="line">    center=DataTypes.vec3(0, 0, 0),</div>
<div class="line">    size=DataTypes.vec2(10, 10),</div>
<div class="line">    color=DataTypes.RGBcolor(0.4, 0.3, 0.2)</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Visualize</span></div>
<div class="line"><span class="keywordflow">try</span>:</div>
<div class="line">    <span class="keyword">with</span> Visualizer(1200, 800, antialiasing_samples=4) <span class="keyword">as</span> visualizer:</div>
<div class="line">        <span class="comment"># Build all geometry</span></div>
<div class="line">        visualizer.buildContextGeometry(context)</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Set up nice view</span></div>
<div class="line">        visualizer.setCameraPosition([8, 8, 6], [0, 0, 3])</div>
<div class="line">        visualizer.setBackgroundColor([0.5, 0.7, 1.0])</div>
<div class="line">        visualizer.setLightDirection([0.3, 0.3, -0.9])</div>
<div class="line">        visualizer.setLightingModel(<span class="stringliteral">&quot;phong_shadowed&quot;</span>)</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Show interactive view</span></div>
<div class="line">        visualizer.plotInteractive()</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Save image</span></div>
<div class="line">        visualizer.printWindow(<span class="stringliteral">&quot;apple_tree.jpg&quot;</span>)</div>
<div class="line">        </div>
<div class="line"><span class="keywordflow">except</span> VisualizerError <span class="keyword">as</span> e:</div>
<div class="line">    print(f<span class="stringliteral">&quot;Visualization failed: {e}&quot;</span>)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md277"></a>
Animation Sequence</h2>
<div class="fragment"><div class="line"><span class="comment"># Create animation of rotating tree</span></div>
<div class="line"><span class="keyword">with</span> WeberPennTree(context) <span class="keyword">as</span> wpt:</div>
<div class="line">    tree_id = wpt.buildTree(WPTType.LEMON)</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">try</span>:</div>
<div class="line">    <span class="keyword">with</span> Visualizer(800, 600, headless=<span class="keyword">True</span>) <span class="keyword">as</span> visualizer:</div>
<div class="line">        visualizer.buildContextGeometry(context)</div>
<div class="line">        visualizer.setBackgroundColor([0.8, 0.9, 1.0])</div>
<div class="line">        visualizer.setLightingModel(<span class="stringliteral">&quot;phong&quot;</span>)</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Create 360-degree rotation</span></div>
<div class="line">        <span class="keywordflow">for</span> angle <span class="keywordflow">in</span> range(0, 360, 5):</div>
<div class="line">            <span class="keyword">import</span> math</div>
<div class="line">            radians = math.radians(angle)</div>
<div class="line">            radius = 12</div>
<div class="line">            x = radius * math.cos(radians)</div>
<div class="line">            y = radius * math.sin(radians)</div>
<div class="line">            </div>
<div class="line">            visualizer.setCameraPosition([x, y, 6], [0, 0, 3])</div>
<div class="line">            visualizer.plotUpdate()</div>
<div class="line">            visualizer.printWindow(f<span class="stringliteral">&quot;animation/frame_{angle:03d}.jpg&quot;</span>)</div>
<div class="line">            </div>
<div class="line">    print(<span class="stringliteral">&quot;Animation sequence complete&quot;</span>)</div>
<div class="line">    </div>
<div class="line"><span class="keywordflow">except</span> VisualizerError <span class="keyword">as</span> e:</div>
<div class="line">    print(f<span class="stringliteral">&quot;Animation failed: {e}&quot;</span>)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md278"></a>
Multi-Scene Comparison</h2>
<div class="fragment"><div class="line"><span class="comment"># Compare different tree types</span></div>
<div class="line">tree_types = [WPTType.APPLE, WPTType.LEMON, WPTType.OLIVE]</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">for</span> i, tree_type <span class="keywordflow">in</span> enumerate(tree_types):</div>
<div class="line">    <span class="comment"># Create clean context for each tree</span></div>
<div class="line">    context = Context()</div>
<div class="line">    wpt = WeberPennTree(context)</div>
<div class="line">    tree_id = wpt.buildTree(tree_type)</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">try</span>:</div>
<div class="line">        <span class="keyword">with</span> Visualizer(600, 600, headless=<span class="keyword">True</span>) <span class="keyword">as</span> visualizer:</div>
<div class="line">            visualizer.buildContextGeometry(context)</div>
<div class="line">            </div>
<div class="line">            <span class="comment"># Standardized view</span></div>
<div class="line">            visualizer.setCameraPosition([6, 6, 6], [0, 0, 3])</div>
<div class="line">            visualizer.setBackgroundColor([1.0, 1.0, 1.0])</div>
<div class="line">            visualizer.setLightingModel(<span class="stringliteral">&quot;phong&quot;</span>)</div>
<div class="line">            </div>
<div class="line">            visualizer.plotUpdate()</div>
<div class="line">            visualizer.printWindow(f<span class="stringliteral">&quot;tree_comparison_{tree_type.name.lower()}.jpg&quot;</span>)</div>
<div class="line">            </div>
<div class="line">    <span class="keywordflow">except</span> VisualizerError <span class="keyword">as</span> e:</div>
<div class="line">        print(f<span class="stringliteral">&quot;Failed to visualize {tree_type.name}: {e}&quot;</span>)</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md279"></a>
Integration with Other Components</h1>
<h2><a class="anchor" id="autotoc_md280"></a>
With RadiationModel</h2>
<div class="fragment"><div class="line"><span class="keyword">from</span> pyhelios <span class="keyword">import</span> RadiationModel</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Run radiation simulation</span></div>
<div class="line"><span class="keywordflow">try</span>:</div>
<div class="line">    <span class="keyword">with</span> RadiationModel(context) <span class="keyword">as</span> radiation:</div>
<div class="line">        radiation.add_radiation_band(<span class="stringliteral">&quot;PAR&quot;</span>)</div>
<div class="line">        source_id = radiation.add_collimated_radiation_source()</div>
<div class="line">        radiation.set_source_flux(source_id, <span class="stringliteral">&quot;PAR&quot;</span>, 1000.0)</div>
<div class="line">        radiation.run_band(<span class="stringliteral">&quot;PAR&quot;</span>)</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Store results in primitive data</span></div>
<div class="line">        results = radiation.get_total_absorbed_flux()</div>
<div class="line">        all_uuids = context.getAllUUIDs()</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">for</span> i, uuid <span class="keywordflow">in</span> enumerate(all_uuids):</div>
<div class="line">            <span class="keywordflow">if</span> i &lt; len(results):</div>
<div class="line">                context.setPrimitiveDataFloat(uuid, <span class="stringliteral">&quot;par_flux&quot;</span>, results[i])</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Visualize radiation results</span></div>
<div class="line">        context.colorPrimitiveByDataPseudocolor(</div>
<div class="line">            all_uuids, <span class="stringliteral">&quot;par_flux&quot;</span>, <span class="stringliteral">&quot;hot&quot;</span>, 256</div>
<div class="line">        )</div>
<div class="line">        </div>
<div class="line">        <span class="comment"># Show colored visualization</span></div>
<div class="line">        <span class="keyword">with</span> Visualizer(1024, 768) <span class="keyword">as</span> visualizer:</div>
<div class="line">            visualizer.buildContextGeometry(context)</div>
<div class="line">            visualizer.setCameraPosition([8, 8, 8], [0, 0, 3])</div>
<div class="line">            visualizer.setLightingModel(<span class="stringliteral">&quot;none&quot;</span>)  <span class="comment"># Show colors directly</span></div>
<div class="line">            visualizer.plotInteractive()</div>
<div class="line">            visualizer.printWindow(<span class="stringliteral">&quot;radiation_visualization.jpg&quot;</span>)</div>
<div class="line">            </div>
<div class="line"><span class="keywordflow">except</span> (RadiationModelError, VisualizerError) <span class="keyword">as</span> e:</div>
<div class="line">    print(f<span class="stringliteral">&quot;Visualization failed: {e}&quot;</span>)</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md281"></a>
Error Handling</h1>
<div class="fragment"><div class="line"><span class="keywordflow">try</span>:</div>
<div class="line">    visualizer = Visualizer(1024, 768, antialiasing_samples=4)</div>
<div class="line">    </div>
<div class="line"><span class="keywordflow">except</span> VisualizerError <span class="keyword">as</span> e:</div>
<div class="line">    print(f<span class="stringliteral">&quot;Visualizer initialization failed: {e}&quot;</span>)</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Check platform-specific requirements</span></div>
<div class="line">    <span class="keyword">import</span> platform</div>
<div class="line">    system = platform.system().lower()</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">if</span> <span class="stringliteral">&#39;linux&#39;</span> <span class="keywordflow">in</span> system:</div>
<div class="line">        print(<span class="stringliteral">&quot;Linux: Install X11 dev packages (libx11-dev, xorg-dev)&quot;</span>)</div>
<div class="line">        print(<span class="stringliteral">&quot;       sudo apt-get install libx11-dev xorg-dev libgl1-mesa-dev&quot;</span>)</div>
<div class="line">    <span class="keywordflow">elif</span> <span class="stringliteral">&#39;darwin&#39;</span> <span class="keywordflow">in</span> system:</div>
<div class="line">        print(<span class="stringliteral">&quot;macOS: Install XQuartz (brew install --cask xquartz)&quot;</span>)</div>
<div class="line">    <span class="keywordflow">elif</span> <span class="stringliteral">&#39;windows&#39;</span> <span class="keywordflow">in</span> system:</div>
<div class="line">        print(<span class="stringliteral">&quot;Windows: Update graphics drivers and Visual Studio runtime&quot;</span>)</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">except</span> ValueError <span class="keyword">as</span> e:</div>
<div class="line">    print(f<span class="stringliteral">&quot;Invalid parameters: {e}&quot;</span>)</div>
<div class="line">    <span class="comment"># Check width, height, antialiasing_samples values</span></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md282"></a>
Performance Optimization</h1>
<h2><a class="anchor" id="autotoc_md283"></a>
Optimized Settings</h2>
<div class="fragment"><div class="line"><span class="comment"># Performance vs quality trade-offs</span></div>
<div class="line">performance_configs = {</div>
<div class="line">    <span class="stringliteral">&quot;fast&quot;</span>: {</div>
<div class="line">        <span class="stringliteral">&quot;width&quot;</span>: 800,</div>
<div class="line">        <span class="stringliteral">&quot;height&quot;</span>: 600,</div>
<div class="line">        <span class="stringliteral">&quot;antialiasing&quot;</span>: 1,</div>
<div class="line">        <span class="stringliteral">&quot;lighting&quot;</span>: <span class="stringliteral">&quot;none&quot;</span></div>
<div class="line">    },</div>
<div class="line">    <span class="stringliteral">&quot;balanced&quot;</span>: {</div>
<div class="line">        <span class="stringliteral">&quot;width&quot;</span>: 1024,</div>
<div class="line">        <span class="stringliteral">&quot;height&quot;</span>: 768,</div>
<div class="line">        <span class="stringliteral">&quot;antialiasing&quot;</span>: 4,</div>
<div class="line">        <span class="stringliteral">&quot;lighting&quot;</span>: <span class="stringliteral">&quot;phong&quot;</span></div>
<div class="line">    },</div>
<div class="line">    <span class="stringliteral">&quot;high_quality&quot;</span>: {</div>
<div class="line">        <span class="stringliteral">&quot;width&quot;</span>: 1920,</div>
<div class="line">        <span class="stringliteral">&quot;height&quot;</span>: 1080,</div>
<div class="line">        <span class="stringliteral">&quot;antialiasing&quot;</span>: 8,</div>
<div class="line">        <span class="stringliteral">&quot;lighting&quot;</span>: <span class="stringliteral">&quot;phong_shadowed&quot;</span></div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Apply configuration</span></div>
<div class="line">config = performance_configs[<span class="stringliteral">&quot;balanced&quot;</span>]</div>
<div class="line">visualizer = Visualizer(</div>
<div class="line">    config[<span class="stringliteral">&quot;width&quot;</span>], </div>
<div class="line">    config[<span class="stringliteral">&quot;height&quot;</span>], </div>
<div class="line">    antialiasing_samples=config[<span class="stringliteral">&quot;antialiasing&quot;</span>]</div>
<div class="line">)</div>
<div class="line">visualizer.setLightingModel(config[<span class="stringliteral">&quot;lighting&quot;</span>])</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md284"></a>
Memory Management</h2>
<div class="fragment"><div class="line"><span class="comment"># For large scenes, load geometry in batches</span></div>
<div class="line"><span class="keyword">def </span>visualize_large_scene(context, batch_size=1000):</div>
<div class="line">    all_uuids = context.getAllUUIDs()</div>
<div class="line">    total_primitives = len(all_uuids)</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">with</span> Visualizer(1024, 768) <span class="keyword">as</span> visualizer:</div>
<div class="line">        <span class="comment"># Process in batches to manage memory</span></div>
<div class="line">        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(0, total_primitives, batch_size):</div>
<div class="line">            batch_uuids = all_uuids[i:i + batch_size]</div>
<div class="line">            visualizer.buildContextGeometry(context, uuids=batch_uuids)</div>
<div class="line">            </div>
<div class="line">            <span class="comment"># Update visualization</span></div>
<div class="line">            visualizer.plotUpdate()</div>
<div class="line">            print(f<span class="stringliteral">&quot;Processed {min(i + batch_size, total_primitives)}/{total_primitives} primitives&quot;</span>)</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md285"></a>
Build Requirements</h1>
<div class="fragment"><div class="line"># Build with visualizer plugin</div>
<div class="line">build_scripts/build_helios --plugins visualizer</div>
<div class="line"> </div>
<div class="line"># Or use profiles that include visualization</div>
<div class="line">build_scripts/build_helios --profile standard</div>
<div class="line">build_scripts/build_helios --profile visualization</div>
<div class="line"> </div>
<div class="line"># Check if visualizer is available</div>
<div class="line">python -c &quot;from pyhelios.plugins import get_plugin_registry; print(get_plugin_registry().is_plugin_available(&#39;visualizer&#39;))&quot;</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md286"></a>
Platform-Specific Installation</h1>
<h2><a class="anchor" id="autotoc_md287"></a>
Linux (Ubuntu/Debian)</h2>
<div class="fragment"><div class="line">sudo apt-get install libx11-dev xorg-dev libgl1-mesa-dev libglu1-mesa-dev</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md288"></a>
Linux (CentOS/RHEL)</h2>
<div class="fragment"><div class="line">sudo yum install libX11-devel mesa-libGL-devel mesa-libGLU-devel</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md289"></a>
macOS</h2>
<div class="fragment"><div class="line">brew install --cask xquartz</div>
<div class="line"># OpenGL should be available by default</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md290"></a>
Windows</h2>
<ul>
<li>OpenGL drivers provided by graphics card drivers</li>
<li>Visual Studio runtime may be required</li>
</ul>
<p>This documentation covers the actual Visualizer implementation in PyHelios, verified against the wrapper code and high-level interface. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
